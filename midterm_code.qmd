
---
title: "An Investigagtion into Model Preformance for Identification of Human vs. AI text"
subtitle: "A report to the Quantum Insight AI research team."
author: "Jenny, Lauren, Amalia"
date: last-modified
format:
  pdf:
    number-sections: true
    indent: true
    toc: false
    include-in-header:
      text: |
        \addtokomafont{disposition}{\rmfamily}
execute:
  echo: false
---

# Statement of the Problem
Quantum Insights is aiming to distinguish human-authored text from AI-generated content. The team developed initial models that, on in-sample test data, correctly differentiated human-generated text from AI generated text with high accuracy ($81.78%-96.25%$). When this model was applied to out-of sample test data, however, the accuracy of the models drops significantly, with the lowest accuracy on the meta models being $52.25%$. Our team is interested in determining the contributing factors to this drop in performance and recommending potential next steps to solve this problem and improve the models' accuracy.

# Approach

The Team investigated this problem on three different avenues. We analyzed the models to determine what variables were of greatest importance when making classifications of texts. We then looked at the correlation matrices of biber features for each of the data sets for in and out of sample data to determine whether there were significantly different trends that might over specify classifications and hamper the models' generalizability. While investigating the correlation matrices, we also investigated the text files themselves, to see if there were any obvious trends or similarities among the human and machine samples in our data. We isolated and analyzed the prompts given to humans and LLMs for the out of sample data to determine whether prompt engineering could play a role in low performance. Finally, we analyzed the histograms of key features to further illuminate any underlying issues.


# Summary of Findings



# Recommendations



# Appendix

```{r, include=FALSE}
library(quanteda)
library(quanteda.textstats)
library(tidyverse)
library(knitr)
library(gt)
library(syuzhet)
library(dplyr)
library(nFactors)
source("../R/helper_functions.R")
source("../R/keyness_functions.R")
source("../R/mda_functions.R")

```


```{r, include = FALSE}
####read in biber data ####
human_chunk_biber <- read_tsv("hape_sample/biber_data/biber_chunk_2.tsv")

gpt_4o_biber <- read_tsv("hape_sample/biber_data/biber_gpt-4o-2024-08-06.tsv")

gpt_4o_mini_biber <- read_tsv("hape_sample/biber_data/biber_gpt-4o-mini-2024-07-18.tsv")

meta_llama_3_8b_biber <- read_tsv("hape_sample/biber_data/biber_Meta-Llama-3-8B.tsv")

meta_llama_3_8b_Instruct_biber <- read_tsv("hape_sample/biber_data/biber_Meta-Llama-3-8B-Instruct.tsv")

meta_llama_3_70B_biber <- read_tsv("hape_sample/biber_data/biber_Meta-Llama-3-70B.tsv")

meta_llama_3_70B_Instruct_biber <- read_tsv("hape_sample/biber_data/biber_Meta-Llama-3-70B-Instruct.tsv")

arxiv_biber <- read_tsv("arxiv_sample/arxiv_biber.tsv")
```

```{r}

arxiv_biber_human <- arxiv_biber %>% 
  filter(str_detect(doc_id, "human")) %>%
  select(where(~ is.numeric(.x) && sum(.x) != 0))

arxiv_biber_machine <- arxiv_biber %>% 
  filter(str_detect(doc_id, "machine")) %>%
  select(where(~ is.numeric(.x) && sum(.x) != 0))

# only filter arxiv out 

```

```{r, fig.cap="Correlation Matrix of Out-Sample Human", out.height = "30%"}
bc_cor <- cor(arxiv_biber_human[-1], method = "pearson")
corrplot::corrplot(bc_cor, type = "upper", order = "hclust", 
         tl.col = "black", tl.srt = 45, diag = F, tl.cex = 0.2)
```
```{r, fig.cap="Correlation Matrix of Out-Sample Machine", out.height = "30%"}
bc_cor <- cor(arxiv_biber_machine[-1], method = "pearson")
corrplot::corrplot(bc_cor, type = "upper", order = "hclust", 
         tl.col = "black", tl.srt = 45, diag = F, tl.cex = 0.2)
```

```{r, fig.cap="Correlation Matrix of In-Sample Human", out.height = "30%"}
bc_cor <- cor(human_chunk_biber[-1], method = "pearson")
corrplot::corrplot(bc_cor, type = "upper", order = "hclust", 
         tl.col = "black", tl.srt = 45, diag = F, tl.cex = 0.2)
```
```{r, fig.cap="Correlation Matrix of In-Sample GPT 4o", out.height = "30%"}
bc_cor <- cor(gpt_4o_biber[-1], method = "pearson")
corrplot::corrplot(bc_cor, type = "upper", order = "hclust", 
         tl.col = "black", tl.srt = 45, diag = F, tl.cex = 0.2)
```

```{r, fig.cap="Correlation Matrix of In-Sample GPT 4o Mini", out.height = "30%"}
bc_cor <- cor(gpt_4o_mini_biber[-1], method = "pearson")
corrplot::corrplot(bc_cor, type = "upper", order = "hclust", 
         tl.col = "black", tl.srt = 45, diag = F, tl.cex = 0.2)
```
```{r, fig.cap="Correlation Matrix of In-Sample Meta 8B", out.height = "30%"}
bc_cor <- cor(meta_llama_3_8b_biber[-1], method = "pearson")
corrplot::corrplot(bc_cor, type = "upper", order = "hclust", 
         tl.col = "black", tl.srt = 45, diag = F, tl.cex = 0.2)
```
```{r, fig.cap="Correlation Matrix of In-Sample Meta 8B Instruct", out.height = "30%"}
bc_cor <- cor(meta_llama_3_8b_Instruct_biber[-1], method = "pearson")
corrplot::corrplot(bc_cor, type = "upper", order = "hclust", 
         tl.col = "black", tl.srt = 45, diag = F, tl.cex = 0.2)
```
```{r, fig.cap="Correlation Matrix of In-Sample Meta 70B", out.height = "30%"}
bc_cor <- cor(meta_llama_3_70B_biber[-1], method = "pearson")
corrplot::corrplot(bc_cor, type = "upper", order = "hclust", 
         tl.col = "black", tl.srt = 45, diag = F, tl.cex = 0.2)
```
```{r, fig.cap="Correlation Matrix of In-Sample Meta 70B Instruct", out.height = "30%"}
bc_cor <- cor(meta_llama_3_70B_Instruct_biber[-1], method = "pearson")
corrplot::corrplot(bc_cor, type = "upper", order = "hclust", 
         tl.col = "black", tl.srt = 45, diag = F, tl.cex = 0.2)
```


```{r}
screeplot_mda(human_chunk_biber)
```


```{r, include=FALSE}
#read in text cunks for analysis

text_chunk <- read_tsv("hape_sample/text_data/text_chunk_2.tsv")

```
